<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,viewport-fit=cover">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="shortcut icon" href="">
    <title>诗词时间</title>
    <script type="text/javascript" src="/data.js"></script>
    <style type="text/css">

        body {
            font-size: 38px;
            padding: 20px;
        }

        * {
            font-family: -apple-system, "Helvetica Neue", Helvetica, "Nimbus Sans L", Arial, "Liberation Sans", "PingFang SC", "Hiragino Sans GB", "Source Han Sans CN", "Source Han Sans SC", "Microsoft YaHei", "Wenquanyi Micro Hei", "WenQuanYi Zen Hei", "ST Heiti", SimHei, "WenQuanYi Zen Hei Sharp", sans-serif;
        }


        .page-work .content.indent {
            text-align: center;

            margin: auto;

            height: 70%;
            vertical-align: middle;

            line-height: 1.9;
            text-indent: 1.5em;
            writing-mode: vertical-rl;

        }


        p {
            margin: 0 auto
        }


        p:first-child {
            font-size: 28px;
        }


        p:nth-child(2) {
            font-size: 16px;
            cursor: pointer;

        }

    </style>
</head>
<body>

<div class="page page-work">
    <div class="work">
        <div class="content indent">
            <p>夜雨寄北</p>

            <p>[唐] 李商隐</p>
            <hr/>


            <p>君问归期未有期</p>
            <hr/>

            <p>巴山夜雨涨秋池</p>
            <hr/>


            <p>何当共剪西窗烛</p>
            <hr/>


            <p>却话巴山夜雨时</p>
            <hr/>

        </div>
    </div>
</div>

<script type="application/javascript">


    let fadeAndMove = [
        {
            opacity: 0,
            transform: `translateY(-50px)`,
        },
        {
            opacity: 1,
            transform: `translateY(0px)`,
        },
    ];

    let titleTiming = {
        duration: 2000,
        easing: "ease-in-out",
    };


    let onclick = function () {

        let item = POEM_DATA[Math.floor(Math.random() * POEM_DATA.length)].split(";");

        let work = document.querySelector(".work");

        let content = document.querySelector(".content");

        var poem = []
        for (var i = 3; i < item.length; i++) {
            poem.push(item[i]);
        }

        var poemContent = "<p>" + item[2] + "</p><p>" + "[" + item[0] + "] " + item[1] + "</p><hr/>"

        if (poem.length == 4) {
            poemContent = poemContent + "<p>" + poem[0] + "</p><hr/>";
            poemContent = poemContent + "<p>" + poem[1] + "</p><hr/>";
            poemContent = poemContent + "<p>" + poem[2] + "</p><hr/>";
            poemContent = poemContent + "<p>" + poem[3] + "</p><hr/>";

        } else {

            var i = 0;

            while (true) {

                if (i == poem.length) {
                    break
                }

                if (i + 1 == poem.length) {
                    poemContent = poemContent + "<p>" + poem[i] + "</p><hr/>";
                    break
                }

                if (poem[i].length >= 8) {
                    poemContent = poemContent + "<p>" + poem[i] + "</p><hr/>";
                    poemContent = poemContent + "<p>" + poem[i + 1] + "</p><hr/>";
                } else {

                    poemContent = poemContent + "<p>" + poem[i] + "，" + poem[i + 1] + "</p><hr/>";

                }


                i = i + 2

            }

        }

        content.innerHTML = poemContent;

        work.animate(fadeAndMove, titleTiming);

    };

    document.body.onclick = onclick;


    document.addEventListener('keydown', function (event) {
        if (event.key == "ArrowRight" || event.key == "ArrowLeft" || event.key == "ArrowUp" || event.key == "ArrowDown") {
            onclick();
        }
    });


</script>

</body>
</html>